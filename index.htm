<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GP Management Portal</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: var(--bg, #f4f6f9); }
    @keyframes gradientFlow { 0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
    :root {
      --navbar-bg: linear-gradient(270deg, #a8dadc, #457b9d, #1d3557);
      --sidebar-bg: linear-gradient(270deg, #34495e, #2c3e50, #1d3557);
      --sidebar-hover: linear-gradient(270deg, #5a6e7f, #3c5a70, #2c3e50);
      --text-color: #fff; --card-bg:#fff; --card-text:#333;
      --bar-start:#5b8fa0;--bar-end:#467381;--bar-border:#3a636f;
      --news-text:#FFFFFF;--pill-radius:14px;--bar-height:30px;--speed:290s;
    }
    .navbar{display:flex;justify-content:space-between;align-items:center;background:var(--navbar-bg);background-size:300% 300%;animation:gradientFlow 10s ease infinite;color:var(--text-color);padding:8px 20px;font-size:16px;font-weight:bold;box-shadow:0 4px 8px rgba(0,0,0,0.5),inset 2px 2px 6px rgba(255,255,255,0.3),inset -2px -2px 6px rgba(0,0,0,0.4);border-bottom:2px solid rgba(255,255,255,0.2);position:relative;z-index:1000;gap:15px;}
    .navbar .logo{text-shadow:2px 2px 4px rgba(0,0,0,0.6);letter-spacing:1px;}
    .bar{width:950px;height:var(--bar-height);border-radius:var(--pill-radius);background:linear-gradient(180deg,var(--bar-start),var(--bar-end));border:1px solid var(--bar-border);box-shadow:inset 0 1px 0 rgba(255,255,255,.25),inset 0 -1px 2px rgba(0,0,0,.25),0 2px 6px rgba(0,0,0,.55);overflow:hidden;display:flex;align-items:center;padding-inline:14px;color:var(--news-text);}
    .ticker{position:relative;width:100%;height:100%;}
    .track{position:absolute;white-space:nowrap;will-change:transform;animation:scroll var(--speed) linear infinite;font-size:14px;font-weight:normal;color:var(--news-text);}
    .track span{display:inline-block;padding-right:60px;}
    .bar:hover .track{animation-play-state:paused;cursor:default;}
    @keyframes scroll{from{transform:translateX(0);}to{transform:translateX(-50%);}}
    .clock{font-size:16px;font-weight:bold;color:#fff;padding:6px 12px;border-radius:8px;background:linear-gradient(145deg,#222,#000);box-shadow:inset 2px 2px 4px rgba(255,255,255,0.2),inset -2px -2px 6px rgba(0,0,0,0.6),4px 4px 8px rgba(0,0,0,0.8),-4px -4px 8px rgba(255,255,255,0.1);text-shadow:0 0 6px #00ffcc,0 0 12px #00ffcc;min-width:100px;text-align:center;}
    .signin-btn{padding:6px 14px;border:none;border-radius:6px;background-color:#007bff;color:#fff;font-size:14px;font-weight:bold;cursor:pointer;transition:background 0.3s;}
    .signin-btn:hover{background-color:#0056b3;}
    .sidebar{position:fixed;top:50px;left:0;width:220px;height:calc(100% - 50px);background:var(--sidebar-bg);background-size:300% 300%;animation:gradientFlow 15s ease infinite;color:var(--text-color);padding-top:15px;overflow-y:auto;box-shadow:3px 0 10px rgba(0,0,0,0.4);display:flex;flex-direction:column;justify-content:space-between;}
    .sidebar a{display:block;padding:12px 20px;margin:5px 10px;background:linear-gradient(145deg,rgba(255,255,255,0.15),rgba(0,0,0,0.25));border-radius:6px;color:#ecf0f1;text-decoration:none;font-size:14px;cursor:pointer;box-shadow:inset 1px 1px 2px rgba(255,255,255,0.2),inset -1px -1px 2px rgba(0,0,0,0.4),2px 2px 5px rgba(0,0,0,0.5);transition:all 0.3s ease-in-out;}
    .sidebar a:hover{background:var(--sidebar-hover);background-size:200% 200%;animation:gradientFlow 8s ease infinite;transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,0.6),inset 1px 1px 3px rgba(255,255,255,0.2);}
    .submenu{margin-left:10px;border-left:2px solid rgba(255,255,255,0.15);max-height:0;overflow:hidden;transition:max-height 0.3s ease,opacity 0.3s ease;opacity:0;}
    .submenu a{font-size:13px;padding:8px 20px;margin:3px 10px;background:linear-gradient(145deg,rgba(255,255,255,0.05),rgba(0,0,0,0.25));border-radius:5px;box-shadow:inset 1px 1px 2px rgba(255,255,255,0.15),inset -1px -1px 2px rgba(0,0,0,0.3);}
    .submenu a:hover{background:var(--sidebar-hover);animation:gradientFlow 6s ease infinite;color:#fff;transform:translateX(3px);}
    .submenu.open{max-height:500px;opacity:1;}
    .content{margin-left:220px;padding:0;height:calc(100vh - 50px);}
    iframe{width:100%;height:100%;border:none;background:var(--card-bg);}
    .dropdown{position:relative;display:inline-block;cursor:pointer;}
    .dropdown-content{display:none;position:absolute;right:0;background:#fff;min-width:180px;border-radius:6px;}
    .dropdown:hover .dropdown-content{display:flex;flex-wrap:wrap;gap:8px;}
    .theme-option{width:40px;height:40px;border-radius:4px;cursor:pointer;border:2px solid transparent;}
    .weather{padding:10px;border-top:1px solid rgba(255,255,255,0.2);text-align:center;}
    .weather h3{font-size:14px;margin:5px 0;color:#fff;}
    .weather iframe{width:100%;height:200px;border:none;border-radius:6px;}

    /* Modal */
    .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;justify-content:center;align-items:center;z-index:2000;}
    .hidden{display:none;}
    .modal .container{width:440px;max-width:95%;background:rgba(255,255,255,0.1);backdrop-filter:blur(15px);border-radius:20px;border:1px solid rgba(255,255,255,0.2);box-shadow:0 0 25px rgba(0,180,255,0.5);position:relative;overflow:hidden;padding:20px 0 25px;}
    .close{position:absolute;top:10px;right:15px;font-size:28px;color:#fff;cursor:pointer;}
    .tabs{display:flex;justify-content:space-around;border-bottom:1px solid rgba(255,255,255,0.2);}
    .tabs button{flex:1;padding:15px;font-size:16px;font-weight:bold;border:none;background:transparent;color:#fff;cursor:pointer;transition:0.3s;}
    .tabs button.active{color:#00bfff;text-shadow:0 0 10px #00bfff,0 0 20px #00bfff;}
    .form{padding:0 25px;}
    .form h2{text-align:center;margin:20px 0;color:#fff;text-shadow:0 0 10px #00bfff;}
    .input-field{margin-bottom:15px;position:relative;}
    .input-field input{width:100%;padding:14px 40px 14px 16px;margin-top:5px;border:none;border-radius:10px;background:rgba(255,255,255,0.15);color:#fff;font-size:15px;outline:none;transition:0.3s;box-sizing:border-box;}
    .input-field input::placeholder{color:#bbb;}
    .input-field input:focus{box-shadow:0 0 10px #00bfff,0 0 20px #00bfff;border:1px solid #00bfff;}
    .toggle-pass{position:absolute;top:50%;right:12px;transform:translateY(-50%);cursor:pointer;font-size:16px;color:#ddd;}
    .btn{width:100%;padding:12px;border:none;border-radius:10px;background:#00bfff;color:#fff;font-size:16px;font-weight:bold;cursor:pointer;transition:0.3s;box-shadow:0 0 15px #00bfff,0 0 30px #00bfff;}
    .btn:hover{background:#009acd;box-shadow:0 0 25px #00bfff,0 0 50px #00bfff;}
    .link{text-align:center;margin-top:15px;font-size:14px;color:#ddd;}
    .link a{color:#00bfff;text-decoration:none;font-weight:bold;text-shadow:0 0 10px #00bfff;}
  </style>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <div class="logo">Bhagabanpur Gram Panchayat</div>
    <div class="bar"><div class="ticker"><div class="track" id="track1"></div><div class="track" id="track2"></div></div></div>
    <div class="clock" id="clock">00:00:00</div>
    <button class="signin-btn" onclick="openLogin()">Sign In</button>
    <div class="nav-links">
      <div class="dropdown">
        <span>Themes ‚ñæ</span>
        <div class="dropdown-content">
          <div class="theme-option" style="background:#1d3557;" onclick="setTheme('default')" title="Default Blue"></div>
          <div class="theme-option" style="background:#2d6a4f;" onclick="setTheme('green')" title="Green"></div>
          <div class="theme-option" style="background:#111;" onclick="setTheme('dark')" title="Dark"></div>
          <div class="theme-option" style="background:#444;" onclick="setTheme('grey')" title="Dark Grey"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sidebar -->
  <div class="sidebar">
    <div>
      <a onclick="loadPage('home')">üè† Home</a>
      <a onclick="toggleSubmenu('submenu-profile')">üë§ Basic Profile ‚ñæ</a>
      <div class="submenu" id="submenu-profile">
        <a onclick="loadPage('allmember')">üë• Manage PRI Profile</a>
        <a onclick="loadPage('uposamity')">ü§ù Upo-Samity Details</a>
      </div>
      <a onclick="loadPage('plan')">üóÇ Action Plan Entry</a>
      <a onclick="toggleSubmenu('submenu-tender')">üìë Tender Management ‚ñæ</a>
      <div class="submenu" id="submenu-tender">
        <a onclick="loadPage('nit')">üìù Prepare NIT</a>
        <a onclick="loadPage('sale')">üí∞ Sale of Tender Form</a>
        <a onclick="loadPage('acceptance')">‚úî Acceptance & EMD Return</a>
        <a onclick="loadPage('workorder')">üìú Issue Work Order</a>
        <a onclick="loadPage('bill')">üìä Bill Payment & Deduction</a>
        <a onclick="loadPage('security')">üîí Security Money Return</a>
      </div>
    </div>
    <div class="weather">
      <h3>üå¶ Live Weather</h3>
      <iframe src="https://embed.windy.com/embed2.html?lat=25.021&lon=88.151&zoom=7&level=surface&overlay=wind&product=gfs&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=default&metricTemp=default" frameborder="0"></iframe>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content"><iframe id="frameContent" src="home.htm"></iframe></div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal hidden">
    <div class="container">
      <span class="close" onclick="closeLogin()">&times;</span>
      <div class="tabs">
        <button id="loginTab" class="active">Login</button>
        <button id="signupTab">Sign Up</button>
      </div>
      <div id="loginForm" class="form">
        <h2>Login</h2>
        <div class="input-field"><input type="text" placeholder="Email or Mobile" required></div>
        <div class="input-field">
          <input type="password" placeholder="Password" id="loginPass" required>
          <span class="toggle-pass" onclick="togglePassword('loginPass', this)">üëÅÔ∏è</span>
        </div>
        <button class="btn">Login</button>
        <div class="link"><a href="#" id="toReset">Forgot Password?</a></div>
        <div class="link">Don't have an account? <a href="#" id="toSignup">Sign Up</a></div>
      </div>
      <div id="signupForm" class="form hidden">
        <h2>Sign Up</h2>
        <div class="input-field"><input type="text" placeholder="Full Name" required></div>
        <div class="input-field"><input type="text" placeholder="Email or Mobile" required></div>
        <div class="input-field">
          <input type="password" placeholder="Password" id="signupPass" required>
          <span class="toggle-pass" onclick="togglePassword('signupPass', this)">üëÅÔ∏è</span>
        </div>
        <div class="input-field">
          <input type="password" placeholder="Confirm Password" id="signupPass2" required>
          <span class="toggle-pass" onclick="togglePassword('signupPass2', this)">üëÅÔ∏è</span>
        </div>
        <button class="btn">Sign Up</button>
        <div class="link">Already have an account? <a href="#" id="toLogin">Login</a></div>
      </div>
      <div id="resetForm" class="form hidden">
        <h2>Reset Password</h2>
        <div class="input-field"><input type="text" placeholder="Email or Mobile" required></div>
        <button class="btn">Send Reset Link</button>
        <div class="link"><a href="#" id="backToLogin">Back to Login</a></div>
      </div>
    </div>
  </div>

  <script>
    function loadPage(page){document.getElementById("frameContent").src=page+".htm";}
    function toggleSubmenu(id){document.getElementById(id).classList.toggle("open");}
    function setTheme(theme){
      if(theme==="default"){document.documentElement.style.setProperty("--navbar-bg","linear-gradient(270deg,#a8dadc,#457b9d,#1d3557)");document.documentElement.style.setProperty("--sidebar-bg","linear-gradient(270deg,#34495e,#2c3e50,#1d3557)");document.documentElement.style.setProperty("--sidebar-hover","linear-gradient(270deg,#5a6e7f,#3c5a70,#2c3e50)");}
      if(theme==="green"){document.documentElement.style.setProperty("--navbar-bg","linear-gradient(270deg,#95d5b2,#52b788,#1b4332)");document.documentElement.style.setProperty("--sidebar-bg","linear-gradient(270deg,#2d6a4f,#1b4332,#081c15)");document.documentElement.style.setProperty("--sidebar-hover","linear-gradient(270deg,#40916c,#2d6a4f,#1b4332)");}
      if(theme==="dark"){document.documentElement.style.setProperty("--navbar-bg","linear-gradient(270deg,#666,#222,#111)");document.documentElement.style.setProperty("--sidebar-bg","linear-gradient(270deg,#333,#111,#000)");document.documentElement.style.setProperty("--sidebar-hover","linear-gradient(270deg,#444,#222,#111)");}
      if(theme==="grey"){document.documentElement.style.setProperty("--navbar-bg","linear-gradient(270deg,#bbb,#555,#222)");document.documentElement.style.setProperty("--sidebar-bg","linear-gradient(270deg,#666,#444,#222)");document.documentElement.style.setProperty("--sidebar-hover","linear-gradient(270deg,#888,#555,#333)");}
    }
    const API_URL="https://script.google.com/macros/s/AKfycbyQHR3YpftGsAK1ElSDiN8oNHLbtJtvyxFe93a3MG91RDUD-Qwz1mJOV2WoDbZebYTe/exec";
    async function loadHeadlines(){try{const res=await fetch(API_URL);const headlines=await res.json();if(!headlines.length){setTracks(["<span>No headlines found</span>"]);return;}const items=headlines.map(h=>h.link?`<span><a href="${h.link}" target="_blank" style="color:var(--news-text);text-decoration:none">${escapeHtml(h.title)}</a></span>`:`<span>${escapeHtml(h.title)}</span>`);const joined=items.join('<span> ‚Ä¢ </span>');setTracks([joined,joined]);}catch(err){console.error(err);setTracks(["<span>Failed to load</span>"]);}}
    function setTracks(arr){document.getElementById("track1").innerHTML=arr[0];document.getElementById("track2").innerHTML=arr[1];}
    function escapeHtml(s){return s.replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m]));}
    loadHeadlines();
    function updateClock(){const now=new Date();const h=String(now.getHours()).padStart(2,"0");const m=String(now.getMinutes()).padStart(2,"0");const s=String(now.getSeconds()).padStart(2,"0");document.getElementById("clock").textContent=`${h}:${m}:${s}`;}
    setInterval(updateClock,1000);updateClock();
    function openLogin(){document.getElementById('loginModal').classList.remove('hidden');}
    function closeLogin(){document.getElementById('loginModal').classList.add('hidden');}
    const loginTab=document.getElementById('loginTab');const signupTab=document.getElementById('signupTab');const loginForm=document.getElementById('loginForm');const signupForm=document.getElementById('signupForm');const resetForm=document.getElementById('resetForm');
    const toSignup=document.getElementById('toSignup');const toLogin=document.getElementById('toLogin');const toReset=document.getElementById('toReset');const backToLogin=document.getElementById('backToLogin');
    loginTab.onclick=()=>{loginTab.classList.add('active');signupTab.classList.remove('active');loginForm.classList.remove('hidden');signupForm.classList.add('hidden');resetForm.classList.add('hidden');};
    signupTab.onclick=()=>{signupTab.classList.add('active');loginTab.classList.remove('active');signupForm.classList.remove('hidden');loginForm.classList.add('hidden');resetForm.classList.add('hidden');};
    toSignup.onclick=e=>{e.preventDefault();signupTab.click();};
    toLogin.onclick=e=>{e.preventDefault();loginTab.click();};
    toReset.onclick=e=>{e.preventDefault();loginForm.classList.add('hidden');signupForm.classList.add('hidden');resetForm.classList.remove('hidden');loginTab.classList.remove('active');signupTab.classList.remove('active');};
    backToLogin.onclick=e=>{e.preventDefault();loginTab.click();};

    // Toggle password visibility
    function togglePassword(id, el){
      const input=document.getElementById(id);
      if(input.type==="password"){input.type="text";el.textContent="üôà";}
      else{input.type="password";el.textContent="üëÅÔ∏è";}
    }
  </script>
</body>
</html>
